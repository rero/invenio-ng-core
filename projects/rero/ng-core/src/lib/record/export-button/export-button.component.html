<!--
  RERO angular core
  Copyright (C) 2022-2024 RERO
  Copyright (C) 2022 UCLouvain

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
@if (exportOptions() && exportOptions().length > 0) {
  <!-- check single export format -->
  @if (exportOptions().length === 1) {
    <!-- check if we can export list -->
    @if (!exportOptions()[0]?.disabled) {
      <a
        [href]="exportOptions()[0].url"
        rel="noopener noreferrer"
        class="p-button font-bold bg-primary-reverse"
      >
        <i class="pi pi-cloud-download mr-2"></i>
        {{ 'Export as' | translate }} {{ exportOptions()[0].label }}
      </a>
    } @else {
      <p-button
        label="{{ 'Export as' | translate }} {{ exportOptions()[0].label }}"
        icon="pi pi-cloud-download"
        styleClass="opacity-30 mx-1"
        [outlined]="true"
        [pTooltip]="exportOptions()[0]?.disabled_message"
        tooltipPosition="top"
      />
    }
  } @else {
    <!-- display multiple export formats as dropdown list -->
    <p-splitButton
      [model]="exportOptions()"
      styleClass="mx-1"
      outlined
    >
      <ng-template pTemplate="content">
        <i class="pi pi-cloud-download mr-2"></i>
        {{ 'Export as' | translate }} â€¦
      </ng-template>
    </p-splitButton>
  }
}
