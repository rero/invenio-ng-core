<!--
  RERO angular core
  Copyright (C) 2020-2024 RERO

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
@if (hiddenFields$ | async; as hiddenFields) {
  <div class="w-100">
    <label for="addField" translate>Add field</label>
    <div>
      <p-autoComplete
        id="addField"
        optionLabel="props.label"
        [(ngModel)]="currentValue"
        [suggestions]="suggestions"
        (completeMethod)="search($event)"
        (onSelect)="onSelect($event)"
        [disabled]="hiddenFields.length < 1"
      />
    </div>
    <div class="add-field-info">
      <small id="addFieldHelp" class="form-text text-muted" translate>
        Press * for all.
      </small>
    </div>
    <ul class="list-unstyled essential-fields">
      @for ( field of essentialFields$ | async; track field; let i = $index) {
        <li class="mb-1">
          <p-button
            id="{{'add-field-' + i}}"
            [label]="translateLabel(field) | async"
            size="small"
            [outlined]="true"
            severity="secondary"
            styleClass="w-full"
            (click)="addField(field)"
          />
        </li>
      }
    </ul>
  </div>
}
